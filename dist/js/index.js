require("@babel/polyfill");var e=require("axios"),t=require("is-valid-domain"),a=require("email-validator");function r(e){return e&&e.__esModule?e.default:e}const n=(e,t)=>{let a=document.getElementById(`${e}`).getContext("2d");new Chart(a,{type:"line",data:{labels:t.categories,datasets:[{label:"Organic Clicks",data:t.organicClicks,backgroundColor:["rgba(255, 99, 132, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(255, 99, 132, 1)","rgba(255, 99, 132, 1)","rgba(255, 99, 132, 1)","rgba(255, 99, 132, 1)","rgba(255, 99, 132, 1)","rgba(255, 99, 132, 1)","rgba(255, 99, 132, 1)","rgba(255, 99, 132, 1)","rgba(255, 99, 132, 1)","rgba(255, 99, 132, 1)","rgba(255, 99, 132, 1)"],borderWidth:1},{label:"Paid Clicks",data:t.paidClicks,backgroundColor:["rgba(54, 162, 235, 0.2)"],borderColor:["rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)"],borderWidth:1}]},options:{title:{display:!0,text:"Organic vs Paid Google Clicks",fontFamily:"Montserrat",fontSize:22,fontColor:"#333",fontStyle:"normal"},legend:{display:!0,align:"end"},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})};if(document.getElementById("paidComparison")){let e=document.getElementById("paidComparison").getContext("2d");new Chart(e,{type:"line",data:{labels:["Jan '20","Feb '20","Mar '20","Apr '20","May '20","Jun '20","Jul '20","Aug '20","Sep '20","Oct '20","Nov '20","Dec '20"],datasets:[{label:"Site 1",data:[4776,6071,5384,4870,8126,5784,4642,4713,4666,5667,4867,4724],backgroundColor:["rgba(255, 99, 132, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(255, 99, 132, 1)","rgba(255, 99, 132, 1)","rgba(255, 99, 132, 1)","rgba(255, 99, 132, 1)","rgba(255, 99, 132, 1)","rgba(255, 99, 132, 1)","rgba(255, 99, 132, 1)","rgba(255, 99, 132, 1)","rgba(255, 99, 132, 1)","rgba(255, 99, 132, 1)","rgba(255, 99, 132, 1)"],borderWidth:1},{label:"Site 2",data:[1594,1988,2033,5648,5548,4138,5097,3954,2548,4460,3800,6066],backgroundColor:["rgba(54, 162, 235, 0.2)"],borderColor:["rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)"],borderWidth:1},{label:"Site 3",data:[2776,4071,1384,870,1126,3784,6642,7713,5666,6667,7867,5724],backgroundColor:["rgba(255, 206, 86, 0.2)"],borderColor:["rgba(255, 206, 86, 1)","rgba(255, 206, 86, 1)","rgba(255, 206, 86, 1)","rgba(255, 206, 86, 1)","rgba(255, 206, 86, 1)","rgba(255, 206, 86, 1)","rgba(255, 206, 86, 1)","rgba(255, 206, 86, 1)","rgba(255, 206, 86, 1)","rgba(255, 206, 86, 1)","rgba(255, 206, 86, 1)","rgba(255, 206, 86, 1)"],borderWidth:1},{label:"Site 4",data:[1776,2071,3384,1870,2126,784,3642,2713,3666,2667,1867,2724],backgroundColor:["rgba(153, 102, 255, 0.2)"],borderColor:["rgba(153, 102, 255, 1)","rgba(153, 102, 255, 1)","rgba(153, 102, 255, 1)","rgba(153, 102, 255, 1)","rgba(153, 102, 255, 1)","rgba(153, 102, 255, 1)","rgba(153, 102, 255, 1)","rgba(153, 102, 255, 1)","rgba(153, 102, 255, 1)","rgba(153, 102, 255, 1)","rgba(153, 102, 255, 1)","rgba(153, 102, 255, 1)"],borderWidth:1},{label:"Site 5",data:[8776,9071,10384,11870,12126,11784,13642,12713,12666,10667,9867,8724],backgroundColor:["rgba(75, 192, 192, 0.2)"],borderColor:["rgba(75, 192, 192, 1)","rgba(75, 192, 192, 1)","rgba(75, 192, 192, 1)","rgba(75, 192, 192, 1)","rgba(75, 192, 192, 1)","rgba(75, 192, 192, 1)","rgba(75, 192, 192, 1)","rgba(75, 192, 192, 1)","rgba(75, 192, 192, 1)","rgba(75, 192, 192, 1)","rgba(75, 192, 192, 1)","rgba(75, 192, 192, 1)"],borderWidth:1}]},options:{title:{display:!0,text:"Paid Clicks Comparision",fontFamily:"Montserrat",fontSize:22,fontColor:"#333",fontStyle:"normal"},legend:{display:!0,align:"end"},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})}const s=()=>{let e=document.querySelector(".alert");e&&e.parentElement.removeChild(e)},d=(e,t)=>{s();let a=`<div class="alert alert--${e}">${t}</div>`;document.querySelector("body").insertAdjacentHTML("afterbegin",a),window.setTimeout(s,4e3)},o=async(t,a)=>{try{let n=await r(e)({method:"POST",url:"http://127.0.0.1:3000/api/v1/users/login",data:{email:t,password:a}});"success"===n.data.status&&(d("success","Logged in successfully!"),"user"==n.data.data.user.role?location.assign("/overview"):"admin"==n.data.data.user.role&&location.assign("/adminOverview"))}catch(e){return d("error",e.response.data.message),!1}},l=async()=>{try{let t=await r(e)({method:"GET",url:"http://127.0.0.1:3000/api/v1/users/logout"});"success"===t.data.status&&(d("success","Logging you out please wait.."),location.assign("/"))}catch(e){d("error","Error logging out. Please try again in a moment.")}},i=async t=>{try{let a=await r(e)({method:"PATCH",url:"http://127.0.0.1:3000/api/v1/users/updateMyInfo",data:t});"success"===a.data.status&&d("success","Data updated successfully!")}catch(e){e.response.data.message.includes(". ")?d("error",e.response.data.message.split(". ")[1]):d("error",e.response.data.message)}},c=async t=>{try{let a=await r(e)({method:"POST",url:"http://127.0.0.1:3000/api/v1/feedbacks",data:t});"success"===a.data.status&&(d("success","Thank you for your feedback! We'll try improve your experience :)"),document.querySelector('input[name="rate"]:checked').checked=!1,document.querySelector(".select-btn").classList.remove("select-btn"),document.getElementById("feedbackMessage").value="")}catch(e){e.response.data.message.includes(". ")?d("error",e.response.data.message.split(". ").reverse()[0]):d("error",e.response.data.message)}},m=async t=>{try{let a=await r(e)({method:"POST",url:"http://127.0.0.1:3000/api/v1/users/forgotPassword",data:{email:t}});"success"===a.data.status&&(d("success","Reset link sent successfully, do check your inbox or spam within 24hrs."),document.getElementById("forgotEmail").value="",document.getElementById("btnForgotSubmit").disabled=!0)}catch(e){d("error",e.response.data.message)}},u=async(t,a,n)=>{try{let s=await r(e)({method:"PATCH",url:`http://127.0.0.1:3000/api/v1/users/${n}`,data:{password:t,confirmPassword:a}});"success"===s.data.status&&(d("success","Password updated successfully, Logging you in.."),document.getElementById("password").value="",document.getElementById("confirmPassword").value="","admin"==s.data.data.user.role?location.assign("/adminOverview"):location.assign("/overview"))}catch(e){d("error",e.response.data.message)}},g=e=>{let a=r(t)(e);return!0===a||(d("error","Sorry, the domain name is not valid."),document.getElementById("btn--register").innerHTML='<i class="fas fa-user-plus me-2"></i>Sign Up',document.getElementById("btn--register").disabled=!1,!1)},b=e=>{let t=r(a).validate(e);return!0===t||(d("error","Sorry, can't register with this email."),document.getElementById("btn--register").innerHTML='<i class="fas fa-user-plus me-2"></i>Sign Up',document.getElementById("btn--register").disabled=!1,!1)},y=async(t,a)=>{let n="",s=[],o={};try{let a=await r(e)({method:"POST",url:"http://127.0.0.1:3000/api/v1/domains/find",data:{name:t.domainName}});"success"===a.data.status&&(n=a.data.data._id,o=a.data.data)}catch(a){try{let a=await r(e)({method:"POST",url:"http://127.0.0.1:3000/api/v1/domains/search",data:{domain:t.domainName}});o=a.data.data}catch(e){return d("error","Sorry, something went wrong while fetching your website data. Please try again.."),!1}try{let t=await r(e)({method:"POST",url:"http://127.0.0.1:3000/api/v1/domains/save",data:o});"success"===t.data.status&&(n=t.data.data.data._id)}catch{return d("error","Sorry, something went wrong while saving your data. Please try again.."),!1}}let l=async t=>{for(let a of t.similarSites.siteName)try{let t=await r(e)({method:"POST",url:"http://127.0.0.1:3000/api/v1/domains/find",data:{name:a}});"success"===t.data.status&&s.push(t.data.data._id)}catch{let n=await r(e)({method:"POST",url:"http://127.0.0.1:3000/api/v1/domains/search",data:{domain:a}});t=n.data.data;try{let a=await r(e)({method:"POST",url:"http://127.0.0.1:3000/api/v1/domains/save",data:t});"success"===a.data.status&&s.push(a.data.data.data._id)}catch{d("error","Some data of your competition could not be processed.")}}};await l(o);try{let t=await r(e)({method:"POST",url:`http://127.0.0.1:3000/api/v1/users/update/${a}`,data:{domain_id:n,competitorSites:s}});"success"===t.data.status&&window.location.assign("/overview")}catch(e){d("error","Sorry, something went very wrong while saving your data. Please try again later.")}},p=async(t,a)=>{try{let n=await r(e)({method:"POST",url:`http://127.0.0.1:3000/api/v1/users/${a}`,data:t});if("success"===n.data.status){let e=n.data.data.user._id;return e}}catch(e){e.response.data.message.includes(". ")?d("error",e.response.data.message.split(". ")[1]):d("error",e.response.data.message),document.getElementById("btn--register")&&(document.getElementById("btn--register").innerHTML='<i class="fas fa-user-plus me-2"></i>Sign Up',document.getElementById("btn--register").disabled=!1),document.getElementById("btn--createAdmin")&&(document.getElementById("btn--createAdmin").textContent="Create",document.getElementById("btn--createAdmin").disabled=!1)}},h=async(t,a=!0)=>{try{let n=await r(e)({method:"DELETE",url:`http://127.0.0.1:3000/api/v1/users/${t}`});if("No Content"===n.statusText)return!0===a&&d("success","User successfully deleted!"),"success"}catch(e){d("error",e.response.data.message)}},f=async t=>{try{let a=await r(e)({method:"DELETE",url:`http://127.0.0.1:3000/api/v1/feedbacks/${t}`});if("No Content"===a.statusText)return d("success","Feedback successfully deleted!"),"success"}catch(e){d("error",e.response.data.message)}},E=async e=>{e&&d("success","New admin created successfully!")},v=async t=>{try{let a=await r(e)({method:"POST",url:`http://127.0.0.1:3000/api/v1/users/toggleUserStatus/${t}`});if(console.log(a.data),"success"===a.data.status)return!0}catch(e){return d("error","Something went wrong while changing account status."),!1}},w=document.getElementById("year"),B=document.querySelector(".form--login"),I=document.querySelector(".form--register"),S=document.querySelector(".form--forgot"),C=document.querySelector(".form--reset"),P=document.getElementById("logout_Btn"),k=document.querySelector(".form--profile"),N=document.querySelector(".pwToggle"),L=document.querySelector(".pwToggleConfirm"),T=document.querySelector(".form--feedback"),q=document.getElementById("adminFeedback-table"),x=document.getElementById("adminOverview-table"),A=document.querySelector(".form--newAdmin"),O=document.querySelector(".trimValue");if(w&&(w.innerHTML=` ${new Date().getFullYear()}`),document.getElementById("organicVsPaid")){let e=JSON.parse(document.getElementById("organicVsPaid").dataset.graphs);n("organicVsPaid",e)}if(document.getElementById("organicVsPaidSecond")){let e=JSON.parse(document.getElementById("organicVsPaidSecond").dataset.graphs);n("organicVsPaidSecond",e)}if(document.getElementById("organicVsPaidThird")){let e=JSON.parse(document.getElementById("organicVsPaidThird").dataset.graphs);n("organicVsPaidThird",e)}if(document.getElementById("organicVsPaidFourth")){let e=JSON.parse(document.getElementById("organicVsPaidFourth").dataset.graphs);n("organicVsPaidFourth",e)}if(document.getElementById("organicVsPaidFifth")){let e=JSON.parse(document.getElementById("organicVsPaidFifth").dataset.graphs);n("organicVsPaidFifth",e)}if(document.getElementById("organicVsPaidSixth")){let e=JSON.parse(document.getElementById("organicVsPaidSixth").dataset.graphs);n("organicVsPaidSixth",e)}if(document.getElementById("organicComparison")){let e=JSON.parse(document.getElementById("organicComparison").dataset.graphs);((e,t)=>{let a=document.getElementById(`${e}`).getContext("2d"),r=[];for(let e=0;e<t.length;e++){let a,n;0==e&&(a="rgba(255, 99, 132, 0.2)",n="rgba(255, 99, 132, 1)"),1==e&&(a="rgba(54, 162, 235, 0.2)",n="rgba(54, 162, 235, 1)"),2==e&&(a="rgba(255, 206, 86, 0.2)",n="rgba(255, 206, 86, 1)"),3==e&&(a="rgba(153, 102, 255, 0.2)",n="rgba(153, 102, 255, 1)"),4==e&&(a="rgba(75, 192, 192, 0.2)",n="rgba(75, 192, 192, 1)"),5==e&&(a="rgba(135, 135, 135, 0.2)",n="rgba(128, 128, 128, 1)");let s={label:t[e].name,data:t[e]._doc.organicClicks,backgroundColor:[a],borderColor:[n,n,n,n,n,n,n,n,n,n,n,n],borderWidth:1};r.push(s)}new Chart(a,{type:"line",data:{labels:t[0]._doc.categories,datasets:r},options:{title:{display:!0,text:"Organic Clicks Comparision",fontFamily:"Montserrat",fontSize:20,fontColor:"#333",fontStyle:"normal"},legend:{display:!0,align:"end"},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})})("organicComparison",e)}B&&B.addEventListener("submit",async e=>{e.preventDefault();let t=document.getElementById("btn--login").firstChild;document.getElementById("btn--login").removeChild(t),document.getElementById("btn--login").disabled=!0,document.querySelector(".fa-circle-notch").style.display="inline-block";let a=document.getElementById("email").value,r=document.getElementById("password").value,n=await o(a,r);!1===n&&(document.getElementById("btn--login").insertAdjacentHTML("afterbegin",'<i class="far fa-sign-in-alt me-2"></i>'),document.getElementById("btn--login").disabled=!1,document.querySelector(".fa-circle-notch").style.display="none")}),I&&I.addEventListener("submit",async e=>{e.preventDefault(),document.getElementById("btn--register").textContent="Processing",document.getElementById("btn--register").disabled=!0,document.getElementById("btn--register").insertAdjacentHTML("afterbegin",'<i class="fas fa-circle-notch fa-spin me-2" style="display: inline-block"></i>');let t=document.getElementById("fullName").value,a=document.getElementById("userName").value,r=document.getElementById("email").value,n=document.getElementById("password").value,s=document.getElementById("confirmPassword").value,d=document.getElementById("domainName").value;if(""===a&&(a=void 0),!1===b(r)||!1===g(d))return;let o=await p({fullName:t,userName:a,email:r,password:n,confirmPassword:s,domainName:d},"signup");if(!o)return;document.querySelector(".loading-message").classList.add("loading-message--show"),document.getElementById("headerSection").style.display="none",document.getElementById("footerSection").style.display="none";let l=await y({fullName:t,userName:a,email:r,password:n,confirmPassword:s,domainName:d},o);!1===l&&(document.querySelector(".loading-message").classList.remove("loading-message--show"),document.getElementById("headerSection").style.display="block",document.getElementById("footerSection").style.display="block",await h(o)),document.getElementById("btn--register").innerHTML='<i class="fas fa-user-plus me-2"></i>Sign Up',document.getElementById("btn--register").disabled=!1}),S&&S.addEventListener("submit",async e=>{e.preventDefault(),document.getElementById("btnForgotSubmit").textContent="Processing...",document.getElementById("btnForgotSubmit").disabled=!0;let t=document.getElementById("forgotEmail").value;await m(t),document.getElementById("btnForgotSubmit").textContent="Submit",document.getElementById("btnForgotSubmit").disabled=!1}),C&&C.addEventListener("submit",e=>{e.preventDefault();let t=document.getElementById("password").value,a=document.getElementById("confirmPassword").value,r=window.location.pathname;u(t,a,r)}),P&&P.addEventListener("click",l),k&&k.addEventListener("submit",async e=>{e.preventDefault(),document.getElementById("btn--save").textContent="Saving...",document.getElementById("btn--save").disabled=!0;let t=new FormData;t.append("fullName",document.getElementById("fullName").value),t.append("userName",document.getElementById("userName").value),t.append("photo",document.getElementById("photo").files[0]);let a=document.getElementById("currentpassword").value,r=document.getElementById("newpassword").value,n=document.getElementById("confirmpassword").value;""===a||""===r||""===n||(t.append("currentPassword",a),t.append("newPassword",r),t.append("confirmPassword",n)),await i(t),document.getElementById("btn--save").textContent="Save Profile",document.getElementById("btn--save").disabled=!1,document.getElementById("currentpassword").value="",document.getElementById("newpassword").value="",document.getElementById("confirmpassword").value=""}),N&&N.addEventListener("click",function(e){e.preventDefault();let t=document.querySelector("#password"),a="password"===t.getAttribute("type")?"text":"password";t.setAttribute("type",a);try{this.childNodes[0].classList.toggle("fa-eye-slash"),this.childNodes[0].classList.toggle("fa-eye")}catch{this.childNodes[1].classList.toggle("fa-eye-slash"),this.childNodes[1].classList.toggle("fa-eye")}}),L&&L.addEventListener("click",function(e){e.preventDefault();let t=document.querySelector("#confirmPassword"),a="password"===t.getAttribute("type")?"text":"password";t.setAttribute("type",a);try{this.childNodes[0].classList.toggle("fa-eye-slash"),this.childNodes[0].classList.toggle("fa-eye")}catch{this.childNodes[1].classList.toggle("fa-eye-slash"),this.childNodes[1].classList.toggle("fa-eye")}}),T&&(document.querySelectorAll(".category-btn").forEach(e=>{e.addEventListener("click",function(t){t.preventDefault(),e.parentElement.childNodes.forEach(e=>{e.classList.contains("select-btn")&&e.classList.remove("select-btn")}),e.classList.add("select-btn")})}),T.addEventListener("submit",async e=>{let t,a;e.preventDefault(),document.getElementById("btn--send").textContent="Sending...",document.getElementById("btn--send").disabled=!0,t=document.querySelector('input[name="rate"]:checked')?document.querySelector('input[name="rate"]:checked').value:void 0,a=document.querySelector(".select-btn")?document.querySelector(".select-btn").value:void 0;let r=document.getElementById("feedbackMessage").value;""==r&&(r=void 0),await c({rating:t,category:a,message:r}),document.getElementById("btn--send").textContent="Send",document.getElementById("btn--send").disabled=!1})),x&&(document.querySelectorAll(".btn-delete").forEach(e=>{e.addEventListener("click",e=>{let t=e.target.parentNode.parentNode.getAttribute("id");document.getElementById("confirmUserDelete").addEventListener("click",async e=>{let a=await h(t);if("success"==a){document.getElementById(`${t}`).remove();let e=parseInt(document.getElementById("userCount").textContent);document.getElementById("userCount").textContent=e-1}})})}),document.querySelectorAll(".slider").forEach(e=>{e.addEventListener("click",async e=>{let t=e.target.parentNode.parentNode.parentNode.getAttribute("id"),a=await v(t);if(!1===a){e.target.parentNode.click();return}})})),q&&document.querySelectorAll(".btn-delete").forEach(e=>{e.addEventListener("click",e=>{let t=e.target.parentNode.parentNode.getAttribute("id");document.getElementById("confirmFeedbackDelete").addEventListener("click",async e=>{let a=await f(t);"success"==a&&document.getElementById(`${t}`).remove()})})}),A&&A.addEventListener("submit",async e=>{e.preventDefault(),document.getElementById("btn--createAdmin").textContent="Creating...",document.getElementById("btn--createAdmin").disabled=!0;let t=document.getElementById("fullName").value,a=document.getElementById("userName").value,r=document.getElementById("email").value,n=document.getElementById("newPassword").value,s=document.getElementById("confirmPassword").value;if(""===a&&(a=void 0),!1===b(r))return;let d=await p({fullName:t,userName:a,email:r,password:n,confirmPassword:s,role:"admin"},"signupOnly");d&&(await E(d),document.getElementById("btn--createAdmin").textContent="Create",document.getElementById("btn--createAdmin").disabled=!1)}),O&&document.querySelectorAll(".trimValue").forEach(e=>{let t=e.textContent;"-"!==t&&(t=(t=t.split(".")[0]).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),e.textContent=t)}),$(document).ready(function(){$(".table-sortable").tablesorter({sortList:[[0,0]]})});
//# sourceMappingURL=index.js.map
